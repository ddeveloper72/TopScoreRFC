import{a as n,aa as h,b as c,k as i}from"./chunk-AIAZ2MA3.js";var d=class o{STORAGE_KEY="rugby-matches";matchesSubject=new i([]);matches$=this.matchesSubject.asObservable();constructor(){this.loadMatches()}getMatches(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e).map(a=>c(n({},a),{date:new Date(a.date)})):this.getDefaultMatches()}catch(e){return console.error("Error loading matches from localStorage:",e),this.getDefaultMatches()}}getAllMatches(){return this.getMatches()}saveMatch(e){let t=this.getMatches(),a=c(n({},e),{id:this.generateId()});return t.push(a),this.setMatches(t),a.id}updateMatch(e,t){let a=this.getMatches(),s=a.findIndex(r=>r.id===e);return s===-1?!1:(a[s]=n(n({},a[s]),t),this.setMatches(a),!0)}deleteMatch(e){let t=this.getMatches(),a=t.findIndex(s=>s.id===e);return a===-1?!1:(t.splice(a,1),this.setMatches(t),!0)}getMatchById(e){return this.getMatches().find(a=>a.id===e)||null}getUpcomingMatches(){let e=this.getMatches(),t=new Date;return e.filter(a=>a.status==="scheduled"&&a.date>=t).sort((a,s)=>a.date.getTime()-s.date.getTime())}getCompletedMatches(){return this.getMatches().filter(t=>t.status==="completed").sort((t,a)=>a.date.getTime()-t.date.getTime())}getAllMatchesSorted(){return this.getMatches().sort((t,a)=>t.date.getTime()-a.date.getTime())}clearAllMatches(){localStorage.removeItem(this.STORAGE_KEY),this.matchesSubject.next([])}setAllMatches(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.matchesSubject.next(e)}catch(t){console.error("Error setting matches:",t)}}getMatchStatistics(){let e=this.getMatches(),t=e.filter(r=>r.status==="completed"),a=e.filter(r=>r.status==="scheduled"),s=e.filter(r=>r.status==="cancelled");return{totalMatches:e.length,completedMatches:t.length,upcomingMatches:a.length,cancelledMatches:s.length,nextMatch:a.length>0?a[0]:null,lastMatch:t.length>0?t[0]:null}}setMatches(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.matchesSubject.next(e)}catch(t){console.error("Error saving matches to localStorage:",t)}}loadMatches(){let e=this.getMatches();this.matchesSubject.next(e)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getDefaultMatches(){let e=[{id:"1",homeTeam:"Lions RFC",awayTeam:"Eagles United",date:new Date(2024,11,15,15,0),venue:"City Stadium",venueDetails:{name:"City Stadium",address:"123 Stadium Drive, Sports City",coordinates:{lat:-33.8688,lng:151.2093},formattedAddress:"123 Stadium Drive, Sports City, NSW 2000"},competition:"League Championship",status:"completed",homeScore:28,awayScore:21},{id:"2",homeTeam:"Tigers FC",awayTeam:"Sharks RFC",date:new Date(2024,11,22,14,30),venue:"Home Ground",venueDetails:{name:"Home Ground",address:"456 Rugby Lane, Home Town",coordinates:{lat:-33.865,lng:151.2094},formattedAddress:"456 Rugby Lane, Home Town, NSW 2001"},competition:"Cup Quarter-Final",status:"completed",homeScore:35,awayScore:14},{id:"3",homeTeam:"Wolves United",awayTeam:"Bears RFC",date:new Date(2025,0,5,16,0),venue:"Central Park",venueDetails:{name:"Central Park Rugby Field",address:"789 Park Avenue, Central District",coordinates:{lat:-33.867,lng:151.208},formattedAddress:"789 Park Avenue, Central District, NSW 2002"},competition:"Friendly Match",status:"scheduled"},{id:"4",homeTeam:"Panthers United",awayTeam:"Warriors RFC",date:new Date(2024,10,30,13,0),venue:"Memorial Stadium",venueDetails:{name:"Memorial Stadium",address:"321 Memorial Way, Victory Heights",coordinates:{lat:-33.86,lng:151.21},formattedAddress:"321 Memorial Way, Victory Heights, NSW 2003"},competition:"Derby Match",status:"completed",homeScore:21,awayScore:21},{id:"5",homeTeam:"Dragons RFC",awayTeam:"Phoenix United",date:new Date(2025,1,14,15,30),venue:"Fortress Ground",venueDetails:{name:"Fortress Ground",address:"555 Fortress Street, Stronghold",coordinates:{lat:-33.871,lng:151.207},formattedAddress:"555 Fortress Street, Stronghold, NSW 2004"},competition:"Valentine's Cup",status:"scheduled"},{id:"6",homeTeam:"Titans RFC",awayTeam:"Giants United",date:new Date(2024,11,1,14,0),venue:"Titan Arena",venueDetails:{name:"Titan Arena",address:"888 Titan Boulevard, Giant Valley",coordinates:{lat:-33.875,lng:151.205},formattedAddress:"888 Titan Boulevard, Giant Valley, NSW 2005"},competition:"Grand Final",status:"completed",homeScore:42,awayScore:38}];return localStorage.getItem(this.STORAGE_KEY)||this.setMatches(e),e}static \u0275fac=function(t){return new(t||o)};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};export{d as a};
