import{n as g,o as v}from"./chunk-4YNBHXAL.js";import{a as o,aa as s,b as h,fa as c,r as n}from"./chunk-H3BBNXSU.js";var p=class a{runtime;constructor(){let t=window;this.runtime=t&&t.__env||{}}get(t,e){let i=this.runtime,d=t.split("."),r=i;for(let m of d)if(r&&Object.prototype.hasOwnProperty.call(r,m))r=r[m];else{r=void 0;break}return r??e}get apiUrl(){let t=(this.get("apiUrl")||"").toString().trim();if(!t)return"";let e=t.replace(/\s+$/,"");try{let i=new URL(e);(!i.pathname||i.pathname==="/"||i.pathname==="")&&(i.pathname="/api"),e=i.toString()}catch{/\/api(\/|$)/i.test(e)||(e=e.replace(/\/+$/,"")+"/api")}return e.replace(/\/+$/,"")}get googleMapsApiKey(){return this.get("googleMaps.apiKey")||""}get googleMapId(){return this.get("googleMaps.mapId")}static \u0275fac=function(e){return new(e||a)};static \u0275prov=s({token:a,factory:a.\u0275fac,providedIn:"root"})};var l=class a{constructor(t,e){this.http=t;this.cfg=e;let i=this.cfg.apiUrl||"http://localhost:3000/api";this.apiUrl=i.replace(/\/$/,""),this.httpOptions={headers:new g({"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,"X-API-Key":this.apiKey})}}apiUrl;apiKey="ClaneRFC2025SecureKey!";httpOptions;getAllMatches(){return this.http.get(`${this.apiUrl}/matches`,this.httpOptions).pipe(n(t=>(t||[]).map(e=>h(o({},e),{id:e._id||e.id,date:e.date?new Date(e.date):new Date}))))}createMatch(t){return this.http.post(`${this.apiUrl}/matches`,t,this.httpOptions)}syncLocalMatch(t){let e={homeTeam:t.homeTeam,awayTeam:t.awayTeam,date:t.date,venue:t.venue,venueDetails:t.venueDetails,competition:t.competition,status:t.status,homeScore:t.homeScore,awayScore:t.awayScore,matchType:t.matchType,homeTeamCategory:t.homeTeamCategory,homeTeamAgeLevel:t.homeTeamAgeLevel,awayTeamAgeLevel:t.awayTeamAgeLevel,events:t.events};return this.http.post(`${this.apiUrl}/matches`,e,this.httpOptions)}updateMatch(t,e){return this.http.put(`${this.apiUrl}/matches/${t}`,e,this.httpOptions)}deleteMatch(t){return this.http.delete(`${this.apiUrl}/matches/${t}`,this.httpOptions)}addMatchEvent(t,e){return this.http.post(`${this.apiUrl}/matches/${t}/events`,e,this.httpOptions)}getMatchEvents(t){return this.http.get(`${this.apiUrl}/matches/${t}/events`,this.httpOptions).pipe(n(e=>e.events||[]))}updateMatchEvent(t,e,i){return this.http.put(`${this.apiUrl}/matches/${t}/events/${e}`,i,this.httpOptions)}deleteMatchEvent(t,e){return this.http.delete(`${this.apiUrl}/matches/${t}/events/${e}`,this.httpOptions)}getMatchWithEvents(t){return this.http.get(`${this.apiUrl}/matches/${t}`,this.httpOptions).pipe(n(e=>h(o({},e),{id:e._id||e.id,date:e.date?new Date(e.date):new Date,events:e.events||[]})))}static \u0275fac=function(e){return new(e||a)(c(v),c(p))};static \u0275prov=s({token:a,factory:a.\u0275fac,providedIn:"root"})};export{p as a,l as b};
