import{a as s,aa as i,b as n,k as m}from"./chunk-H3BBNXSU.js";var c=class o{STORAGE_KEY="rugby-score-games";gamesSubject=new m([]);games$=this.gamesSubject.asObservable();constructor(){this.loadGames()}saveGame(e){let t=this.getGames(),a=n(s({},e),{id:this.generateId(),timestamp:new Date});return t.push(a),this.setGames(t),a.id}updateGame(e,t){let a=this.getGames(),r=a.findIndex(g=>g.id===e);return r===-1?!1:(a[r]=s(s({},a[r]),t),this.setGames(a),!0)}getGames(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading games from localStorage:",e),[]}}getGame(e){return this.getGames().find(a=>a.id===e)||null}deleteGame(e){let t=this.getGames(),a=t.filter(r=>r.id!==e);return a.length===t.length?!1:(this.setGames(a),!0)}clearAllGames(){localStorage.removeItem(this.STORAGE_KEY),this.gamesSubject.next([])}exportGames(){let e=this.getGames();return JSON.stringify(e,null,2)}importGames(e){try{let t=JSON.parse(e);if(Array.isArray(t)){let r=[...this.getGames(),...t];return this.setGames(r),!0}return!1}catch(t){return console.error("Error importing games:",t),!1}}getStatistics(){let e=this.getGames(),t=e.filter(a=>a.status==="completed");return{totalGames:e.length,completedGames:t.length,activeGames:e.length-t.length,averageScore:this.calculateAverageScore(t),mostRecentGame:e.length>0?e[e.length-1]:null}}setGames(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.gamesSubject.next(e)}catch(t){console.error("Error saving games to localStorage:",t)}}loadGames(){let e=this.getGames();this.gamesSubject.next(e)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}calculateAverageScore(e){if(e.length===0)return{home:0,away:0};let t=e.reduce((a,r)=>({home:a.home+r.homeTeam.score,away:a.away+r.awayTeam.score}),{home:0,away:0});return{home:Math.round(t.home/e.length),away:Math.round(t.away/e.length)}}static \u0275fac=function(t){return new(t||o)};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
