import{a as r,b as c,ba as h,k as d}from"./chunk-JMAXUHPF.js";var l=class o{STORAGE_KEY="rugby-matches";matchesSubject=new d([]);matches$=this.matchesSubject.asObservable();constructor(){this.loadMatches()}getMatches(){try{let t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t).map(e=>c(r({},e),{date:new Date(e.date)})):this.getDefaultMatches()}catch(t){return console.error("Error loading matches from localStorage:",t),this.getDefaultMatches()}}getAllMatches(){return this.getMatches()}saveMatch(t){let a=this.getMatches(),e=c(r({},t),{id:this.generateId()});return a.push(e),this.setMatches(a),e.id}updateMatch(t,a){let e=this.getMatches(),s=e.findIndex(n=>n.id===t);return s===-1?!1:(e[s]=r(r({},e[s]),a),this.setMatches(e),!0)}deleteMatch(t){let a=this.getMatches(),e=a.findIndex(s=>s.id===t);return e===-1?!1:(a.splice(e,1),this.setMatches(a),!0)}getMatchById(t){return this.getMatches().find(e=>e.id===t)||null}getUpcomingMatches(){let t=this.getMatches(),a=new Date;return t.filter(e=>e.status==="scheduled"&&e.date>=a).sort((e,s)=>e.date.getTime()-s.date.getTime())}getCompletedMatches(){return this.getMatches().filter(a=>a.status==="completed").sort((a,e)=>e.date.getTime()-a.date.getTime())}getAllMatchesSorted(){return this.getMatches().sort((a,e)=>a.date.getTime()-e.date.getTime())}clearAllMatches(){localStorage.removeItem(this.STORAGE_KEY),this.matchesSubject.next([])}setAllMatches(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),this.matchesSubject.next(t)}catch(a){console.error("Error setting matches:",a)}}getMatchStatistics(){let t=this.getMatches(),a=t.filter(n=>n.status==="completed"),e=t.filter(n=>n.status==="scheduled"),s=t.filter(n=>n.status==="cancelled");return{totalMatches:t.length,completedMatches:a.length,upcomingMatches:e.length,cancelledMatches:s.length,nextMatch:e.length>0?e[0]:null,lastMatch:a.length>0?a[0]:null}}setMatches(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),this.matchesSubject.next(t)}catch(a){console.error("Error saving matches to localStorage:",a)}}loadMatches(){let t=this.getMatches();this.matchesSubject.next(t)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getDefaultMatches(){let t=[{id:"1",homeTeam:"Lions RFC",awayTeam:"Eagles United",date:new Date(2024,11,15,15,0),venue:"City Stadium",venueDetails:{name:"City Stadium",address:"123 Stadium Drive, Sports City",coordinates:{lat:-33.8688,lng:151.2093},formattedAddress:"123 Stadium Drive, Sports City, NSW 2000"},competition:"League Championship",status:"completed",homeScore:28,awayScore:21},{id:"2",homeTeam:"Tigers FC",awayTeam:"Sharks RFC",date:new Date(2024,11,22,14,30),venue:"Home Ground",venueDetails:{name:"Home Ground",address:"456 Rugby Lane, Home Town",coordinates:{lat:-33.865,lng:151.2094},formattedAddress:"456 Rugby Lane, Home Town, NSW 2001"},competition:"Cup Quarter-Final",status:"completed",homeScore:35,awayScore:14},{id:"3",homeTeam:"Wolves United",awayTeam:"Bears RFC",date:new Date(2025,0,5,16,0),venue:"Central Park",venueDetails:{name:"Central Park Rugby Field",address:"789 Park Avenue, Central District",coordinates:{lat:-33.867,lng:151.208},formattedAddress:"789 Park Avenue, Central District, NSW 2002"},competition:"Friendly Match",status:"scheduled"},{id:"4",homeTeam:"Panthers United",awayTeam:"Warriors RFC",date:new Date(2024,10,30,13,0),venue:"Memorial Stadium",venueDetails:{name:"Memorial Stadium",address:"321 Memorial Way, Victory Heights",coordinates:{lat:-33.86,lng:151.21},formattedAddress:"321 Memorial Way, Victory Heights, NSW 2003"},competition:"Derby Match",status:"completed",homeScore:21,awayScore:21},{id:"5",homeTeam:"Dragons RFC",awayTeam:"Phoenix United",date:new Date(2025,1,14,15,30),venue:"Fortress Ground",venueDetails:{name:"Fortress Ground",address:"555 Fortress Street, Stronghold",coordinates:{lat:-33.871,lng:151.207},formattedAddress:"555 Fortress Street, Stronghold, NSW 2004"},competition:"Valentine's Cup",status:"scheduled"},{id:"6",homeTeam:"Titans RFC",awayTeam:"Giants United",date:new Date(2024,11,1,14,0),venue:"Titan Arena",venueDetails:{name:"Titan Arena",address:"888 Titan Boulevard, Giant Valley",coordinates:{lat:-33.875,lng:151.205},formattedAddress:"888 Titan Boulevard, Giant Valley, NSW 2005"},competition:"Grand Final",status:"completed",homeScore:42,awayScore:38}];return localStorage.getItem(this.STORAGE_KEY)||this.setMatches(t),t}addEventToMatch(t,a){let e=this.getMatches(),s=e.findIndex(n=>n.id===t||n._id===t);if(s!==-1){e[s].events||(e[s].events=[]);let n=c(r({},a),{_id:a._id||this.generateId(),createdAt:a.createdAt||new Date,updatedAt:a.updatedAt||new Date});e[s].events.push(n),this.setMatches(e)}}updateEventInMatch(t,a,e){let s=this.getMatches(),n=s.findIndex(i=>i.id===t||i._id===t);if(n!==-1&&s[n].events){let i=s[n].events.findIndex(m=>m._id===a);i!==-1&&(s[n].events[i]=c(r(r({},s[n].events[i]),e),{updatedAt:new Date}),this.setMatches(s))}}deleteEventFromMatch(t,a){let e=this.getMatches(),s=e.findIndex(n=>n.id===t||n._id===t);s!==-1&&e[s].events&&(e[s].events=e[s].events.filter(n=>n._id!==a),this.setMatches(e))}getEventsForMatch(t){return this.getMatchById(t)?.events||[]}updateMatchWithEvents(t,a){let e=this.getMatches(),s=e.findIndex(n=>n.id===t||n._id===t);s!==-1&&(e[s].events=a,this.setMatches(e))}static \u0275fac=function(a){return new(a||o)};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};export{l as a};
